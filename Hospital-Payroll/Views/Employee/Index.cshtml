
@{
    ViewData["Title"] = "Index";
    Layout = "Form_panel";
    var Empid = TempData["Empid"] as Hospital_Payroll.Models.Employee_M;
}

<div class="page-header">
    <h3 class="page-title"> Employee </h3>
    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item"><a href="#">Employee</a></li>
            <li class="breadcrumb-item active" aria-current="page">Create</li>
        </ol>
    </nav>
</div>
<div class="row">
    <div class="col-md-6 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">PERSONAL DETAIL</h4>
                <form class="forms-sample">


                    <div class="form-group">
                        <label for="Employee_ID">Employee ID</label>
                        <input type="text" class="form-control" disabled id="Employee_ID" placeholder="Employee_ID" maxlength="10" value="@TempData["Empid"]">
                    </div>


                    <div class="form-group Name">
                        <label for="Name">Name</label>
                        <input type="text" class="form-control" id="Name" placeholder="Name" maxlength="50">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Name</span>
                    </div>


                    <div class="form-group Father_Name">
                        <label for="Name">Father Name</label>
                        <input type="text" class="form-control" id="Father_Name" placeholder="Father Name" maxlength="50">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Father Name</span>
                    </div>


                    <div class="form-group">
                        <label for="Date_of_Birth">Date of Birth</label>
                        <input type="date" class="form-control" id="Date_of_Birth" placeholder="DateofBirth">
                    </div>

                    <div class="form-group row">
                        <label class="col-sm-3 col-form-label">Gender</label>
                        <div class="col-sm-4">
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input Gender" name="Gender" id="Male" value="M" checked> Male
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-5">
                            <div class="form-check">
                                <label class="form-check-label">
                                    <input type="radio" class="form-check-input Gender" name="Gender" id="Female" value="F"> Female
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="form-group CNIC">
                        <label for="CNIC">CNIC</label>
                        <input type="number" class="form-control" id="CNIC" placeholder="CNIC" maxlength="15">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the CNIC</span>
                    </div>


                    <div class="form-group Phone">
                        <label for="Phone">Phone</label>
                        <input type="number" class="form-control" id="Phone" placeholder="Phone" maxlength="15">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Phone</span>
                    </div>

                    <div class="form-group">
                        <label for="address">Address</label>
                        <input type="text" class="form-control" id="address" placeholder="Address" maxlength="200">
                    </div>


                    <div class="form-group Email">
                        <label for="Email">Email</label>
                        <input type="email" class="form-control" id="Email" placeholder="Email" maxlength="50">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the E-mail</span>
                        <span class="valid"><span class="mdi mdi-alert-circle"></span> Enter the Valid E-mail</span>
                    </div>


                </form>
            </div>
        </div>
    </div>

    <div class="col-md-6 grid-margin stretch-card">
        <div class="card">
            <div class="card-body">
                <h4 class="card-title">COMPANY DETAIL</h4>
                <form class="forms-sample">



                    <div class="form-group Designation">
                        <label for="Designation">Designation</label>
                        <input type="text" class="form-control" id="Designation" placeholder="Designation" maxlength="15">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Designation</span>
                    </div>


                    <div class="form-group Gross_Salary">
                        <label for="Gross_Salary">Gross Salary</label>
                        <input type="number" class="form-control" id="Gross_Salary" placeholder="Gross Salary" maxlength="15">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Gross Salary</span>
                    </div>


                    <div class="form-group Time_In">
                        <label for="Time_In">Time In</label>
                        <input type="time" class="form-control" id="Time_In" placeholder="Time_In" maxlength="15">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Time In</span>
                    </div>


                    <div class="form-group Grace_Time_IN">
                        <label for="Grace_Time_IN">Grace Time IN</label>
                        <input type="time" class="form-control" id="Grace_Time_IN" placeholder="Grace Time IN">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Grace Time In</span>
                    </div>



                    <div class="form-group Time_Out">
                        <label for="Time_Out">Time Out</label>
                        <input type="time" class="form-control" id="Time_Out" placeholder="Time_Out">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Time Out</span>
                    </div>

                    <div class="form-group Grace_Time_Out">
                        <label for="Grace_Time_Out">Grace Time Out</label>
                        <input type="time" class="form-control" id="Grace_Time_Out" placeholder="Grace Time Out">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Grace Time Out</span>
                    </div>




                    <div class="form-group Overtime_Rate">
                        <label for="Overtime_Rate">Overtime Rate</label>
                        <input type="number" class="form-control" id="Overtime_Rate" placeholder="Overtime Rate">
                        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Overtime Rate</span>
                    </div>

                    <div class="form-check form-check-primary">
                        <label class="form-check-label">
                            <input type="checkbox" id="Monday_WD" class="form-check-input" value="N"> Monday
                        </label>
                    </div>

                    <div class="form-check form-check-primary">
                        <label class="form-check-label">
                            <input type="checkbox" id="Tuesday_WD" class="form-check-input" value="N"> Tuesday
                        </label>
                    </div>

                    <div class="form-check form-check-primary">
                        <label class="form-check-label">
                            <input type="checkbox" id="Wednesday_WD" class="form-check-input" value="N"> Wednesday
                        </label>
                    </div>

                    <div class="form-check form-check-primary">
                        <label class="form-check-label">
                            <input type="checkbox" id="Thursday_WD" class="form-check-input" value="N"> Thursday
                        </label>
                    </div>

                    <div class="form-check form-check-primary">
                        <label class="form-check-label">
                            <input type="checkbox" id="Friday_WD" class="form-check-input" value="N"> Friday
                        </label>
                    </div>

                    <div class="form-check form-check-primary">
                        <label class="form-check-label">
                            <input type="checkbox" id="Saturday_WD" class="form-check-input" value="N"> Saturday
                        </label>
                    </div>

                    <div class="form-check form-check-primary">
                        <label class="form-check-label">
                            <input type="checkbox" id="Sunday_WD" class="form-check-input" value="N"> Sunday
                        </label>
                    </div>


                    <button type="button" id="Save" class="btn btn-gradient-primary mr-2">Submit</button>
                    <button class="btn btn-light">Cancel</button>
                    <span class="text-success message">Record Saved Successfully...!</span>

                </form>
            </div>
        </div>
    </div>
</div>




<style>
    .error {
        color: red;
        font-size: 10px;
        display: none;
    }

    .valid {
        color: red;
        font-size: 10px;
        display: none;
    }

    .message {
        font-size: 10px;
        display: none;
    }
</style>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {

        var monday = '';

        $("#Monday_WD").change(function () {
            if (this.checked) {
                monday='Y';
            }
            else {
                monday='N';
            }
        });

        var tuesday = '';

        $("#Tuesday_WD").change(function () {
            if (this.checked) {
                tuesday = 'Y';
            }
            else {
                tuesday = 'N';
            }
        });

        var wednesday = '';

        $("#Wednesday_WD").change(function () {
            if (this.checked) {
                wednesday = 'Y';
            }
            else {
                wednesday = 'N';
            }
        });


        var thursday = '';

        $("#Thursday_WD").change(function () {
            if (this.checked) {
                thursday = 'Y';
            }
            else {
                thursday = 'N';
            }
        });

        var friday = '';

        $("#Friday_WD").change(function () {
            if (this.checked) {
                friday = 'Y';
            }
            else {
                friday = 'N';
            }
        });

        var saturday = '';

        $("#Saturday_WD").change(function () {
            if (this.checked) {
                saturday = 'Y';
            }
            else {
                saturday = 'N';
            }
        });


        var sunday = '';

        $("#Sunday_WD").change(function () {
            if (this.checked) {
                sunday = 'Y';
            }
            else {
                sunday = 'N';
            }
        });



        $("#Save").click(function () {
            var isAllValid = true;

            if (!($('#Name').val().trim() != '')) {
                isAllValid = false;
                $('.Name .error').css('display', 'block');
            }
            else {
                $('.Name .error').css('display', 'none');
            }

            if (!($('#Phone').val().trim() != '')) {
                isAllValid = false;
                $('.Phone .error').css('display', 'block');
            }
            else {
                $('.Phone .error').css('display', 'none');
            }

            if (!($('#Email').val().trim() != '')) {
                isAllValid = false;
                $('.Email .error').css('display', 'block');
                $('.valid').css('display', 'none');
            }
            else {
                $('.Email .error').css('display', 'none');


                var emailReg = /^([\w-\.]+@@([\w-]+\.)+[\w-]{2,4})?$/;
                var emailval = $('#Email').val();

                if (emailReg.test(emailval)) {

                    $('.valid').css('display', 'none');

                }

                else {
                    isAllValid = false;
                    $('.valid').css('display', 'block');
                }


            }

         


         



            if (isAllValid) {

                var data = {
                    Emp_id: $('#Employee_ID').val(),
                    Name: $('#Name').val(),
                    Father_Name: $('#Father_Name').val(),
                    Date_of_Birth: $('#Date_of_Birth').val(),
                    CNIC: $('#CNIC').val(),
                    address: $('#address').val(),
                    Phone: $('#Phone').val(),
                    Email: $('#Email').val(),
                    Gender: $('input[name="Gender"]:checked').val(),
                    Designation: $('#Designation').val(),
                    Gross_Salary: $('#Gross_Salary').val(),
                    Time_In: $('#Time_In').val(),
                    Time_Out: $('#Time_Out').val(),
                    Grace_Time_IN: $('#Grace_Time_IN').val(),
                    Grace_Time_Out: $('#Grace_Time_Out').val(),
                    Overtime_Rate: $('#Overtime_Rate').val(),
                    Monday_WD: monday,
                    Tuesday_WD: tuesday,
                    Wednesday_WD: wednesday,
                    Thursday_WD: thursday,
                    Friday_WD: friday,
                    Saturday_WD: saturday,
                    Sunday_WD: sunday,


                }

                $.ajax({
                    type: 'POST',
                    url: '/Employee/Index',
                    data: {
                        'Emp_id': data.Emp_id,
                        'Name': data.Name,
                        'Father_Name': data.Father_Name,
                        'Date_of_Birth': data.Date_of_Birth,
                        'CNIC': data.CNIC,
                        'address': data.address,
                        'Phone': data.Phone,
                        'Email': data.Email,
                        'Gender': data.Gender,
                        'Designation': data.Designation,
                        'Gross_Salary': data.Gross_Salary,
                        'Time_In': data.Time_In,
                        'Time_Out': data.Time_Out,
                        'Grace_Time_IN': data.Grace_Time_IN,
                        'Grace_Time_Out': data.Grace_Time_Out,
                        'Overtime_Rate': data.Overtime_Rate,
                        'Monday_WD': data.Monday_WD,
                        'Tuesday_WD': data.Tuesday_WD,
                        'Wednesday_WD': data.Wednesday_WD,
                        'Thursday_WD': data.Thursday_WD,
                        'Friday_WD': data.Friday_WD,
                        'Saturday_WD': data.Saturday_WD,
                        'Sunday_WD': data.Sunday_WD

                    },
                    success: function (response) {
                        if (response.success) {
                            $('.message').delay(300).fadeIn();
                            $('.message').delay(200).fadeOut();

                            setTimeout(function () {
                                getid();
                            }, 2000);
                        }
                    }

                });
            }



            function getid() {
                $.ajax({
                    type: 'GET',
                    url: '/Employee/GetData',
                    data: { Item_category_id: 1 },
                    success: function (response) {
                        if (response.success) {
                            $('#Employee_ID').val(response.fetchdata);
                            $('#Name,	#Father_Name,	#CNIC,	#address,	#Phone,	#Email,	#Date_of_Birth,	#Gender,	#Designation,	#Gross_Salary,	#Time_In,	#Time_Out,	#Grace_Time_IN,	#Grace_Time_Out,	#Overtime_Rate').val(null);
                            $('#Male').prop('checked', true);
                            $('#Monday_WD').prop('checked', false);
                            $('#Tuesday_WD').prop('checked', false);
                            $('#Wednesday_WD').prop('checked', false);
                            $('#Thursday_WD').prop('checked', false);
                            $('#Friday_WD').prop('checked', false);
                            $('#Saturday_WD').prop('checked', false);
                            $('#Sunday_WD').prop('checked', false);
                            
                        }
                    }
                });
            }

        });


    });
</script>
