
@{
    ViewData["Title"] = "Index";
    Layout = "login_partial";
}

<h6 class="font-weight-light">Sign in to continue.</h6>
<form class="pt-3">
    <div class="form-group uname">
        <input type="email" class="form-control form-control-lg" id="uname" placeholder="E-mail" value="sahal@gmail.com">
        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the E-mail</span>
    </div>
    <div class="form-group pwd">
        <input type="password" class="form-control form-control-lg" id="pwd" placeholder="Password" value=".">
        <span class="error"><span class="mdi mdi-alert-circle"></span> Enter the Password</span>
    </div>
    <div class="mt-3">
        <a id="Save" class="btn btn-block btn-gradient-primary btn-lg font-weight-medium auth-form-btn" href="#">SIGN IN</a>
    </div>
    <div class="my-2 d-flex justify-content-between align-items-center">
        @*<div class="form-check">
            <label class="form-check-label text-muted">
                <input type="checkbox" class="form-check-input"> Keep me signed in
            </label>
        </div>
        <a href="#" class="auth-link text-black">Forgot password?</a>*@
        <span class="mailandpwd">E-mail or Password is incorrect.</span>
    </div>
    @*<div class="mb-2">
            <button type="button" class="btn btn-block btn-facebook auth-form-btn">
                <i class="mdi mdi-facebook mr-2"></i>Connect using facebook
            </button>
        </div>*@
    @*<div class="text-center mt-4 font-weight-light">
            Don't have an account? <a href="register.html" class="text-primary">Create</a>
        </div>*@
</form>


<style>
    .error {
        color: red;
        font-size: 10px;
        display: none;
    }
    .mailandpwd {
        color: red;
        display: none;
    }
</style>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {




        $('#Save').click(function () {


            var isAllValid = true;


            if (!($('#uname').val().trim() != '')) {
                isAllValid = false;
                $('.uname .error').css('display', 'block');
            }
            else {
                $('.uname .error').css('display', 'none');
            }


            if (!($('#pwd').val().trim() != '')) {
                isAllValid = false;
                $('.pwd .error').css('display', 'block');
            }
            else {
                $('.pwd .error').css('display', 'none');
            }



            debugger

            if (isAllValid) {
                var data = {

                    username: $('#uname').val(),
                    password: $('#pwd').val(),

                }
                debugger

                $.ajax({
                    type: 'POST',
                    url: '/login/Index',
                    data: {
                        'username': data.username,
                        'password': data.password,

                    },
                    success: function (response) {
                        if (response.success) {
                            var baseUrl = "@Url.Action("Index","Dashboard")";
                            window.location.href = baseUrl;
                        }
                        else {
                            $('.mailandpwd').delay(300).fadeIn();
                            $('.mailandpwd').delay(200).fadeOut();
                        }
                    }

                });

            }


        })
    });
</script>
